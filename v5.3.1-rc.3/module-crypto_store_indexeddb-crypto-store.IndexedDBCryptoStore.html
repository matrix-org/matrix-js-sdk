<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>JSDoc: IndexedDBCryptoStore</title>

    <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="./build/entry.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="https://fonts.googleapis.com/css?family=Muli:100,400,700|Oswald:300|Inconsolata,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
    <link type="text/css" rel="stylesheet" href="styles/app.min.css">
    <link type="text/css" rel="stylesheet" href="styles/iframe.css">
</head>

<body>
    <div id="stickyNavbarOverlay"></div>
    <div class="top-navbar">
        <div class="container">
            <nav class="navbar" role="navigation" aria-label="main navigation">
                <div class="navbar-brand">
                    
                    
                        <h1 class="navbar-item">Documentation</h1>
                    
                    <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                    </a>
                </div>
                
            </nav>
        </div>
    </div>
    <div class="container">
        <div class="columns">
            <div class="column is-3" id="sidebarNav">
                <div class="sidebar">
                    <nav>
                        <h2><a href="index.html">Home</a></h2><div class="category"><h3>Modules</h3><ul><li><a href="crypto_DeviceList%250A%250AManages%2520the%2520list%2520of%2520other%2520users_%2520devicesmodule_.html">crypto/DeviceList

Manages the list of other users' devices</a></li><li><a href="crypto_RoomList%250A%250AManages%2520the%2520list%2520of%2520encrypted%2520roomsmodule_.html">crypto/RoomList

Manages the list of encrypted rooms</a></li><li><a href="module-auto-discovery.html">auto-discovery</a></li><li><a href="module-base-apis.html">base-apis</a></li><li><a href="module-client.html">client</a></li><li><a href="module-content-repo.html">content-repo</a></li><li><a href="module-ContentHelpers.html">ContentHelpers</a></li><li><a href="module-crypto.html">crypto</a></li><li><a href="module-crypto_algorithms.html">crypto/algorithms</a></li><li><a href="module-crypto_algorithms_base.html">crypto/algorithms/base</a></li><li><a href="module-crypto_algorithms_megolm.html">crypto/algorithms/megolm</a></li><li><a href="module-crypto_algorithms_olm.html">crypto/algorithms/olm</a></li><li><a href="module-crypto_CrossSigning.html">crypto/CrossSigning</a></li><li><a href="module-crypto_deviceinfo.html">crypto/deviceinfo</a></li><li><a href="module-crypto_OutgoingRoomKeyRequestManager.html">crypto/OutgoingRoomKeyRequestManager</a></li><li><a href="module-crypto_SecretStorage.html">crypto/SecretStorage</a></li><li><a href="module-crypto_store_base.html">crypto/store/base</a></li><li><a href="module-crypto_store_indexeddb-crypto-store.html">crypto/store/indexeddb-crypto-store</a></li><li><a href="module-crypto_store_localStorage-crypto-store.html">crypto/store/localStorage-crypto-store</a></li><li><a href="module-crypto_store_memory-crypto-store.html">crypto/store/memory-crypto-store</a></li><li><a href="module-crypto_verification_Base.html">crypto/verification/Base</a></li><li><a href="module-crypto_verification_Error.html">crypto/verification/Error</a></li><li><a href="module-crypto_verification_IllegalMethod.html">crypto/verification/IllegalMethod</a></li><li><a href="module-crypto_verification_QRCode.html">crypto/verification/QRCode</a></li><li><a href="module-crypto_verification_SAS.html">crypto/verification/SAS</a></li><li><a href="module-filter.html">filter</a></li><li><a href="module-filter-component.html">filter-component</a></li><li><a href="module-http-api.html">http-api</a></li><li><a href="module-interactive-auth.html">interactive-auth</a></li><li><a href="module-logger.html">logger</a></li><li><a href="module-models_event.html">models/event</a></li><li><a href="module-models_event-context.html">models/event-context</a></li><li><a href="module-models_event-timeline.html">models/event-timeline</a></li><li><a href="module-models_event-timeline-set.html">models/event-timeline-set</a></li><li><a href="module-models_group.html">models/group</a></li><li><a href="module-models_room.html">models/room</a></li><li><a href="module-models_room-member.html">models/room-member</a></li><li><a href="module-models_room-state.html">models/room-state</a></li><li><a href="module-models_room-summary.html">models/room-summary</a></li><li><a href="module-models_search-result.html">models/search-result</a></li><li><a href="module-models_user.html">models/user</a></li><li><a href="module-pushprocessor.html">pushprocessor</a></li><li><a href="module-ReEmitter.html">ReEmitter</a></li><li><a href="module-scheduler.html">scheduler</a></li><li><a href="module-store_indexeddb.html">store/indexeddb</a></li><li><a href="module-store_memory.html">store/memory</a></li><li><a href="module-store_session_webstorage.html">store/session/webstorage</a></li><li><a href="module-store_stub.html">store/stub</a></li><li><a href="module-sync-accumulator.html">sync-accumulator</a></li><li><a href="module-timeline-window.html">timeline-window</a></li><li><a href="module-utils.html">utils</a></li><li><a href="module-webrtc_call.html">webrtc/call</a></li><li><a href="olmlib%250A%250AUtilities%2520common%2520to%2520olm%2520encryption%2520algorithmsmodule_.html">olmlib

Utilities common to olm encryption algorithms</a></li></ul><h3>Externals</h3><ul><li><a href="external-EventEmitter.html">EventEmitter</a></li></ul><h3>Classes</h3><ul><li><a href="Backend.html">Backend</a></li><li><a href="crypto_DeviceList%250A%250AManages%2520the%2520list%2520of%2520other%2520users_%2520devicesmodule_-DeviceListUpdateSerialiser.html">DeviceListUpdateSerialiser</a></li><li><a href="IndexedDBStoreWorker.html">IndexedDBStoreWorker</a></li><li><a href="InRoomChannel.html">InRoomChannel</a></li><li><a href="LocalIndexedDBStoreBackend.html">LocalIndexedDBStoreBackend</a></li><li><a href="module-auto-discovery.AutoDiscovery.html">AutoDiscovery</a></li><li><a href="module-auto-discovery.AutoDiscovery.FAIL_ERROR.html">FAIL_ERROR</a></li><li><a href="module-auto-discovery.AutoDiscovery.FAIL_PROMPT.html">FAIL_PROMPT</a></li><li><a href="module-auto-discovery.AutoDiscovery.PROMPT.html">PROMPT</a></li><li><a href="module-auto-discovery.AutoDiscovery.SUCCESS.html">SUCCESS</a></li><li><a href="module-auto-discovery-DiscoveredClientConfig.html">DiscoveredClientConfig</a></li><li><a href="module-base-apis.MatrixBaseApis.html">MatrixBaseApis</a></li><li><a href="module-client.MatrixClient.html">MatrixClient</a></li><li><a href="module-crypto.html">crypto</a></li><li><a href="module-crypto_algorithms_base.DecryptionAlgorithm.html">DecryptionAlgorithm</a></li><li><a href="module-crypto_algorithms_base.DecryptionError.html">DecryptionError</a></li><li><a href="module-crypto_algorithms_base.EncryptionAlgorithm.html">EncryptionAlgorithm</a></li><li><a href="module-crypto_algorithms_base.UnknownDeviceError.html">UnknownDeviceError</a></li><li><a href="module-crypto_algorithms_megolm-MegolmDecryption.html">MegolmDecryption</a></li><li><a href="module-crypto_algorithms_megolm-MegolmEncryption.html">MegolmEncryption</a></li><li><a href="module-crypto_algorithms_olm-OlmDecryption.html">OlmDecryption</a></li><li><a href="module-crypto_algorithms_olm-OlmEncryption.html">OlmEncryption</a></li><li><a href="module-crypto_CrossSigning.CrossSigningInfo.html">CrossSigningInfo</a></li><li><a href="module-crypto_CrossSigning.DeviceTrustLevel.html">DeviceTrustLevel</a></li><li><a href="module-crypto_CrossSigning.UserTrustLevel.html">UserTrustLevel</a></li><li><a href="module-crypto_deviceinfo.html">crypto/deviceinfo</a></li><li><a href="module-crypto_DeviceList.html">crypto/DeviceList

Manages the list of other users' devicesmodule:.DeviceList</a></li><li><a href="module-crypto_OlmDevice.html">crypto/OlmDevice</a></li><li><a href="module-crypto_RoomList.html">crypto/RoomList

Manages the list of encrypted roomsmodule:.RoomList</a></li><li><a href="module-crypto_store_indexeddb-crypto-store.IndexedDBCryptoStore.html">IndexedDBCryptoStore</a></li><li><a href="module-crypto_store_localStorage-crypto-store.LocalStorageCryptoStore.html">LocalStorageCryptoStore</a></li><li><a href="module-crypto_store_memory-crypto-store.MemoryCryptoStore.html">MemoryCryptoStore</a></li><li><a href="module-crypto_verification_Base.VerificationBase.html">VerificationBase</a></li><li><a href="module-crypto_verification_IllegalMethod-crypto_verification_IllegalMethod_IllegalMethod.html">crypto/verification/IllegalMethod/IllegalMethod</a></li><li><a href="module-crypto_verification_QRCode-crypto_verification_QRCode_ReciprocateQRCode.html">crypto/verification/QRCode/ReciprocateQRCode</a></li><li><a href="module-crypto_verification_SAS.html">crypto/verification/SAS</a></li><li><a href="module-crypto-IncomingRoomKeyRequest.html">IncomingRoomKeyRequest</a></li><li><a href="module-crypto-IncomingRoomKeyRequestCancellation.html">IncomingRoomKeyRequestCancellation</a></li><li><a href="module-filter.Filter.html">Filter</a></li><li><a href="module-filter-component.FilterComponent.html">FilterComponent</a></li><li><a href="module-http-api.MatrixError.html">MatrixError</a></li><li><a href="module-http-api.MatrixHttpApi.html">MatrixHttpApi</a></li><li><a href="module-interactive-auth.html">interactive-auth</a></li><li><a href="module-models_event.MatrixEvent.html">MatrixEvent</a></li><li><a href="module-models_event-context.EventContext.html">EventContext</a></li><li><a href="module-models_event-timeline.EventTimeline.html">EventTimeline</a></li><li><a href="module-models_event-timeline-set.EventTimelineSet.html">EventTimelineSet</a></li><li><a href="module-models_room.html">models/room</a></li><li><a href="module-models_room-member.html">models/room-member</a></li><li><a href="module-models_room-state.RoomState.html">RoomState</a></li><li><a href="module-models_room-summary.RoomSummary.html">RoomSummary</a></li><li><a href="module-models_search-result.SearchResult.html">SearchResult</a></li><li><a href="module-models_user.User.html">User</a></li><li><a href="module-pushprocessor.PushProcessor.html">PushProcessor</a></li><li><a href="module-scheduler.MatrixScheduler.html">MatrixScheduler</a></li><li><a href="module-store_indexeddb.IndexedDBStore.html">IndexedDBStore</a></li><li><a href="module-store_memory.MemoryStore.html">MemoryStore</a></li><li><a href="module-store_session_webstorage.WebStorageSessionStore.html">WebStorageSessionStore</a></li><li><a href="module-store_stub.StubStore.html">StubStore</a></li><li><a href="module-sync-accumulator.SyncAccumulator.html">SyncAccumulator</a></li><li><a href="module-timeline-window.TimelineWindow.html">TimelineWindow</a></li><li><a href="module-webrtc_call.MatrixCall.html">MatrixCall</a></li><li><a href="Relations.html">Relations</a></li><li><a href="RemoteIndexedDBStoreBackend.html">RemoteIndexedDBStoreBackend</a></li><li><a href="SyncApi.html">SyncApi</a></li><li><a href="ToDeviceChannel.html">ToDeviceChannel</a></li></ul><h3>Interfaces</h3><ul><li><a href="module-crypto_store_base-CryptoStore.html">CryptoStore</a></li></ul><h3>Events</h3><ul><li><a href="global.html#event:%2522change%2522wheneverthestateoftherequestobjecthaschanged.">"change" whenever the state of the request object has changed.</a></li><li><a href="module-client.html#~event:MatrixClient%2522accountData%2522">MatrixClient"accountData"</a></li><li><a href="module-client.html#~event:MatrixClient%2522Call.incoming%2522">MatrixClient"Call.incoming"</a></li><li><a href="module-client.html#~event:MatrixClient%2522crossSigning.keysChanged%2522">MatrixClient"crossSigning.keysChanged"</a></li><li><a href="module-client.html#~event:MatrixClient%2522crypto.keyBackupStatus%2522">MatrixClient"crypto.keyBackupStatus"</a></li><li><a href="module-client.html#~event:MatrixClient%2522crypto.roomKeyRequest%2522">MatrixClient"crypto.roomKeyRequest"</a></li><li><a href="module-client.html#~event:MatrixClient%2522crypto.roomKeyRequestCancellation%2522">MatrixClient"crypto.roomKeyRequestCancellation"</a></li><li><a href="module-client.html#~event:MatrixClient%2522crypto.secrets.requestCancelled%2522">MatrixClient"crypto.secrets.requestCancelled"</a></li><li><a href="module-client.html#~event:MatrixClient%2522crypto.suggestKeyRestore%2522">MatrixClient"crypto.suggestKeyRestore"</a></li><li><a href="module-client.html#~event:MatrixClient%2522crypto.verification.request.unknown%2522">MatrixClient"crypto.verification.request.unknown"</a></li><li><a href="module-client.html#~event:MatrixClient%2522crypto.verification.request%2522">MatrixClient"crypto.verification.request"</a></li><li><a href="module-client.html#~event:MatrixClient%2522crypto.warning%2522">MatrixClient"crypto.warning"</a></li><li><a href="module-client.html#~event:MatrixClient%2522deleteRoom%2522">MatrixClient"deleteRoom"</a></li><li><a href="module-client.html#~event:MatrixClient%2522deviceVerificationChanged%2522">MatrixClient"deviceVerificationChanged"</a></li><li><a href="module-client.html#~event:MatrixClient%2522event%2522">MatrixClient"event"</a></li><li><a href="module-client.html#~event:MatrixClient%2522Group.myMembership%2522">MatrixClient"Group.myMembership"</a></li><li><a href="module-client.html#~event:MatrixClient%2522Group.profile%2522">MatrixClient"Group.profile"</a></li><li><a href="module-client.html#~event:MatrixClient%2522Group%2522">MatrixClient"Group"</a></li><li><a href="module-client.html#~event:MatrixClient%2522no_consent%2522">MatrixClient"no_consent"</a></li><li><a href="module-client.html#~event:MatrixClient%2522Room.accountData%2522">MatrixClient"Room.accountData"</a></li><li><a href="module-client.html#~event:MatrixClient%2522Room.localEchoUpdated%2522">MatrixClient"Room.localEchoUpdated"</a></li><li><a href="module-client.html#~event:MatrixClient%2522Room.name%2522">MatrixClient"Room.name"</a></li><li><a href="module-client.html#~event:MatrixClient%2522Room.receipt%2522">MatrixClient"Room.receipt"</a></li><li><a href="module-client.html#~event:MatrixClient%2522Room.redaction%2522">MatrixClient"Room.redaction"</a></li><li><a href="module-client.html#~event:MatrixClient%2522Room.redactionCancelled%2522">MatrixClient"Room.redactionCancelled"</a></li><li><a href="module-client.html#~event:MatrixClient%2522Room.tags%2522">MatrixClient"Room.tags"</a></li><li><a href="module-client.html#~event:MatrixClient%2522Room.timeline%2522">MatrixClient"Room.timeline"</a></li><li><a href="module-client.html#~event:MatrixClient%2522Room.timelineReset%2522">MatrixClient"Room.timelineReset"</a></li><li><a href="module-client.html#~event:MatrixClient%2522Room%2522">MatrixClient"Room"</a></li><li><a href="module-client.html#~event:MatrixClient%2522RoomMember.membership%2522">MatrixClient"RoomMember.membership"</a></li><li><a href="module-client.html#~event:MatrixClient%2522RoomMember.name%2522">MatrixClient"RoomMember.name"</a></li><li><a href="module-client.html#~event:MatrixClient%2522RoomMember.powerLevel%2522">MatrixClient"RoomMember.powerLevel"</a></li><li><a href="module-client.html#~event:MatrixClient%2522RoomMember.typing%2522">MatrixClient"RoomMember.typing"</a></li><li><a href="module-client.html#~event:MatrixClient%2522RoomState.events%2522">MatrixClient"RoomState.events"</a></li><li><a href="module-client.html#~event:MatrixClient%2522RoomState.members%2522">MatrixClient"RoomState.members"</a></li><li><a href="module-client.html#~event:MatrixClient%2522RoomState.newMember%2522">MatrixClient"RoomState.newMember"</a></li><li><a href="module-client.html#~event:MatrixClient%2522Session.logged_out%2522">MatrixClient"Session.logged_out"</a></li><li><a href="module-client.html#~event:MatrixClient%2522sync%2522">MatrixClient"sync"</a></li><li><a href="module-client.html#~event:MatrixClient%2522toDeviceEvent%2522">MatrixClient"toDeviceEvent"</a></li><li><a href="module-client.html#~event:MatrixClient%2522User.avatarUrl%2522">MatrixClient"User.avatarUrl"</a></li><li><a href="module-client.html#~event:MatrixClient%2522User.currentlyActive%2522">MatrixClient"User.currentlyActive"</a></li><li><a href="module-client.html#~event:MatrixClient%2522User.displayName%2522">MatrixClient"User.displayName"</a></li><li><a href="module-client.html#~event:MatrixClient%2522User.lastPresenceTs%2522">MatrixClient"User.lastPresenceTs"</a></li><li><a href="module-client.html#~event:MatrixClient%2522User.presence%2522">MatrixClient"User.presence"</a></li><li><a href="module-client.html#~event:MatrixClient%2522userTrustStatusChanged%2522">MatrixClient"userTrustStatusChanged"</a></li><li><a href="module-models_event.html#.event:MatrixEvent%2522Event.decrypted%2522">MatrixEvent"Event.decrypted"</a></li><li><a href="module-webrtc_call.html#~event:MatrixCall%2522error%2522">MatrixCall"error"</a></li></ul><h3>Global</h3><ul><li><a href="global.html#_initialiseFromExportedDevice">_initialiseFromExportedDevice</a></li><li><a href="global.html#clearTimeout">clearTimeout</a></li><li><a href="global.html#createClient">createClient</a></li><li><a href="global.html#decryptBrowser">decryptBrowser</a></li><li><a href="global.html#decryptNode">decryptNode</a></li><li><a href="global.html#encryptBrowser">encryptBrowser</a></li><li><a href="global.html#encryptNode">encryptNode</a></li><li><a href="global.html#exists">exists</a></li><li><a href="global.html#getRequest">getRequest</a></li><li><a href="global.html#request">request</a></li><li><a href="global.html#selectQuery">selectQuery</a></li><li><a href="global.html#setCryptoStoreFactory">setCryptoStoreFactory</a></li><li><a href="global.html#setNow">setNow</a></li><li><a href="global.html#setTimeout">setTimeout</a></li><li><a href="global.html#wrapRequest">wrapRequest</a></li></ul></div>
                    </nav>
                </div>
            </div>
            <div class="column is-9-desktop">
                <div class="content" id="main-content-wrapper">
                    <header class="page-title">
                        <p>Class</p>
                        <h1>IndexedDBCryptoStore</h1>
                    </header>
                    
                    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>
            <span class="ancestors"><a href="module-crypto_store_indexeddb-crypto-store.html">crypto/store/indexeddb-crypto-store</a>.</span>IndexedDBCryptoStore<span class="signature">(indexedDB, dbName)</span><span class="type-signature"></span></h2>
        
            <div class="class-description">An implementation of CryptoStore, which is normally backed by an indexeddb,
but with fallback to MemoryCryptoStore.</div>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class='vertical-section'>
                <h3 class="title"><span>Constructor</span></h3>
                <div class="members">
                    <div class="member">


    
    <h4 class="name" id="IndexedDBCryptoStore">
        <a class="href-link" href="#IndexedDBCryptoStore">#</a>
        
        <span class="code-name">
            
                new IndexedDBCryptoStore<span class="signature">(indexedDB, dbName)</span><span class="type-signature"></span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Create a new IndexedDBCryptoStore
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>indexedDB</code></td>
  

  <td class="type">
  
      
<span class="param-type">IDBFactory</span>


  
  </td>

  

  

  <td class="description last">global indexedDB instance</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>dbName</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">name of db to connect to</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    
    <dt class="implements">Implements:</dt>
    <dd class="implements"><ul>
        
            <li><a href="module-crypto_store_base-CryptoStore.html">module:crypto/store/base~CryptoStore</a></li>
        
    </ul></dd>
    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line45">line 45</a>
            </span>
        </p>
    
</dl>





















</div>
                </div>
            </div>
        
    
    </div>
    
    

    

    

    

    

    

    

    
        <div class='vertical-section'>
            <h3 class="title"><span>Methods</span></h3>
            <div class="members">
            
                <div class="member">


    
    <h4 class="name" id="addEndToEndInboundGroupSession">
        <a class="href-link" href="#addEndToEndInboundGroupSession">#</a>
        
        <span class="code-name">
            
                addEndToEndInboundGroupSession<span class="signature">(senderCurve25519Key, sessionId, sessionData, txn)</span><span class="type-signature"></span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Adds an end-to-end inbound group session to the store.
If there already exists an inbound group session with the same
senderCurve25519Key and sessionID, the session will not be added.
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>senderCurve25519Key</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">The sender's curve 25519 key</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>sessionId</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">The ID of the session</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>sessionData</code></td>
  

  <td class="type">
  
      
<span class="param-type">object</span>


  
  </td>

  

  

  <td class="description last">The session data structure</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>txn</code></td>
  

  <td class="type">
  
      
<span class="param-type">*</span>


  
  </td>

  

  

  <td class="description last">An active transaction. See doTxn().</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line467">line 467</a>
            </span>
        </p>
    
</dl>





















</div>
            
                <div class="member">


    
    <h4 class="name" id="countEndToEndSessions">
        <a class="href-link" href="#countEndToEndSessions">#</a>
        
        <span class="code-name">
            
                countEndToEndSessions<span class="signature">(txn, func)</span><span class="type-signature"></span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Returns the number of end-to-end sessions in the store
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>txn</code></td>
  

  <td class="type">
  
      
<span class="param-type">*</span>


  
  </td>

  

  

  <td class="description last">An active transaction. See doTxn().</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>func</code></td>
  

  <td class="type">
  
      
<span class="param-type">function</span>


  
  </td>

  

  

  <td class="description last">Called with the count of sessions</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line359">line 359</a>
            </span>
        </p>
    
</dl>





















</div>
            
                <div class="member">


    
    <h4 class="name" id="countSessionsNeedingBackup">
        <a class="href-link" href="#countSessionsNeedingBackup">#</a>
        
        <span class="code-name">
            
                countSessionsNeedingBackup<span class="signature">(txn)</span><span class="type-signature"> &rarr; {Promise}</span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Count the inbound group sessions that need to be backed up.
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>txn</code></td>
  

  <td class="type">
  
      
<span class="param-type">*</span>


  
  </td>

  

  

  <td class="description last">An active transaction. See doTxn(). (optional)</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line561">line 561</a>
            </span>
        </p>
    
</dl>


















    <div class='columns method-parameter'>
        <div class="column is-2"><label>Returns:</label></div>
        <div class="column is-10">
            
                    

<div class="columns">
    
    <div class='param-desc column is-7'>resolves to the number of sessions</div>
    
    
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
        
<span class="param-type">Promise</span>


    </div>
    
</div>

                
        </div>
    </div>




</div>
            
                <div class="member">


    
    <h4 class="name" id="deleteAllData">
        <a class="href-link" href="#deleteAllData">#</a>
        
        <span class="code-name">
            
                deleteAllData<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Delete all data from this store.
    </div>
    













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line153">line 153</a>
            </span>
        </p>
    
</dl>


















    <div class='columns method-parameter'>
        <div class="column is-2"><label>Returns:</label></div>
        <div class="column is-10">
            
                    

<div class="columns">
    
    <div class='param-desc column is-7'>resolves when the store has been cleared.</div>
    
    
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
        
<span class="param-type">Promise</span>


    </div>
    
</div>

                
        </div>
    </div>




</div>
            
                <div class="member">


    
    <h4 class="name" id="deleteOutgoingRoomKeyRequest">
        <a class="href-link" href="#deleteOutgoingRoomKeyRequest">#</a>
        
        <span class="code-name">
            
                deleteOutgoingRoomKeyRequest<span class="signature">(requestId, expectedState)</span><span class="type-signature"> &rarr; {Promise}</span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Look for an existing room key request by id and state, and delete it if
found
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>requestId</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">ID of request to update</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>expectedState</code></td>
  

  <td class="type">
  
      
<span class="param-type">number</span>


  
  </td>

  

  

  <td class="description last">state we expect to find the request in</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line282">line 282</a>
            </span>
        </p>
    
</dl>


















    <div class='columns method-parameter'>
        <div class="column is-2"><label>Returns:</label></div>
        <div class="column is-10">
            
                    

<div class="columns">
    
    <div class='param-desc column is-7'>resolves once the operation is completed</div>
    
    
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
        
<span class="param-type">Promise</span>


    </div>
    
</div>

                
        </div>
    </div>




</div>
            
                <div class="member">


    
    <h4 class="name" id="doTxn">
        <a class="href-link" href="#doTxn">#</a>
        
        <span class="code-name">
            
                doTxn<span class="signature">(mode, stores, func)</span><span class="type-signature"> &rarr; {Promise}</span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Perform a transaction on the crypto store. Any store methods
that require a transaction (txn) object to be passed in may
only be called within a callback of either this function or
one of the store functions operating on the same transaction.
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>mode</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">'readwrite' if you need to call setter
    functions with this transaction. Otherwise, 'readonly'.</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>stores</code></td>
  

  <td class="type">
  
      
<span class="param-type">Array.&lt;string></span>


  
  </td>

  

  

  <td class="description last">List IndexedDBCryptoStore.STORE_*
    options representing all types of object that will be
    accessed or written to with this transaction.</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>func</code></td>
  

  <td class="type">
  
      
<span class="param-type">function</span>


  
  </td>

  

  

  <td class="description last">Function called with the
    transaction object: an opaque object that should be passed
    to store functions.</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line606">line 606</a>
            </span>
        </p>
    
</dl>


















    <div class='columns method-parameter'>
        <div class="column is-2"><label>Returns:</label></div>
        <div class="column is-10">
            
                    

<div class="columns">
    
    <div class='param-desc column is-7'>Promise that resolves with the result of the `func`
    when the transaction is complete. If the backend is
    async (ie. the indexeddb backend) any of the callback
    functions throwing an exception will cause this promise to
    reject with that exception. On synchronous backends, the
    exception will propagate to the caller of the getFoo method.</div>
    
    
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
        
<span class="param-type">Promise</span>


    </div>
    
</div>

                
        </div>
    </div>




</div>
            
                <div class="member">


    
    <h4 class="name" id="getAllEndToEndInboundGroupSessions">
        <a class="href-link" href="#getAllEndToEndInboundGroupSessions">#</a>
        
        <span class="code-name">
            
                getAllEndToEndInboundGroupSessions<span class="signature">(txn, func)</span><span class="type-signature"></span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Fetches all inbound group sessions in the store
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>txn</code></td>
  

  <td class="type">
  
      
<span class="param-type">*</span>


  
  </td>

  

  

  <td class="description last">An active transaction. See doTxn().</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>func</code></td>
  

  <td class="type">
  
      
<span class="param-type">function</span>


  
  </td>

  

  

  <td class="description last">Called once for each group session
    in the store with an object having keys {senderKey, sessionId,
    sessionData}, then once with null to indicate the end of the list.</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line454">line 454</a>
            </span>
        </p>
    
</dl>





















</div>
            
                <div class="member">


    
    <h4 class="name" id="getAllEndToEndSessions">
        <a class="href-link" href="#getAllEndToEndSessions">#</a>
        
        <span class="code-name">
            
                getAllEndToEndSessions<span class="signature">(txn, func)</span><span class="type-signature"></span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Retrieve all end-to-end sessions
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>txn</code></td>
  

  <td class="type">
  
      
<span class="param-type">*</span>


  
  </td>

  

  

  <td class="description last">An active transaction. See doTxn().</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>func</code></td>
  

  <td class="type">
  
      
<span class="param-type">function</span>


  
  </td>

  

  

  <td class="description last">Called one for each session with
    an object with, deviceKey, lastReceivedMessageTs, sessionId
    and session keys.</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line401">line 401</a>
            </span>
        </p>
    
</dl>





















</div>
            
                <div class="member">


    
    <h4 class="name" id="getAllOutgoingRoomKeyRequestsByState">
        <a class="href-link" href="#getAllOutgoingRoomKeyRequestsByState">#</a>
        
        <span class="code-name">
            
                getAllOutgoingRoomKeyRequestsByState<span class="signature">(wantedState)</span><span class="type-signature"> &rarr; {Promise.&lt;Array.&lt;*>>}</span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Look for room key requests by state â€“
unlike above, return a list of all entries in one state.
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>wantedState</code></td>
  

  <td class="type">
  
      
<span class="param-type">Number</span>


  
  </td>

  

  

  <td class="description last"></td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line235">line 235</a>
            </span>
        </p>
    
</dl>


















    <div class='columns method-parameter'>
        <div class="column is-2"><label>Returns:</label></div>
        <div class="column is-10">
            
                    

<div class="columns">
    
    <div class='param-desc column is-7'>Returns an array of requests in the given state</div>
    
    
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
        
<span class="param-type">Promise.&lt;Array.&lt;*>></span>


    </div>
    
</div>

                
        </div>
    </div>




</div>
            
                <div class="member">


    
    <h4 class="name" id="getCrossSigningKeys">
        <a class="href-link" href="#getCrossSigningKeys">#</a>
        
        <span class="code-name">
            
                getCrossSigningKeys<span class="signature">(txn, func)</span><span class="type-signature"></span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Get the public part of the cross-signing keys (eg. self-signing key,
user signing key).
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>txn</code></td>
  

  <td class="type">
  
      
<span class="param-type">*</span>


  
  </td>

  

  

  <td class="description last">An active transaction. See doTxn().</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>func</code></td>
  

  <td class="type">
  
      
<span class="param-type">function</span>


  
  </td>

  

  

  <td class="description last">Called with the account keys object:
       { key_type: base64 encoded seed } where key type = user_signing_key_seed or self_signing_key_seed</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line318">line 318</a>
            </span>
        </p>
    
</dl>





















</div>
            
                <div class="member">


    
    <h4 class="name" id="getEndToEndDeviceData">
        <a class="href-link" href="#getEndToEndDeviceData">#</a>
        
        <span class="code-name">
            
                getEndToEndDeviceData<span class="signature">(txn, func)</span><span class="type-signature"></span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Get the state of all tracked devices
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>txn</code></td>
  

  <td class="type">
  
      
<span class="param-type">*</span>


  
  </td>

  

  

  <td class="description last">An active transaction. See doTxn().</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>func</code></td>
  

  <td class="type">
  
      
<span class="param-type">function</span>


  
  </td>

  

  

  <td class="description last">Function called with the
    device data</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line519">line 519</a>
            </span>
        </p>
    
</dl>





















</div>
            
                <div class="member">


    
    <h4 class="name" id="getEndToEndInboundGroupSession">
        <a class="href-link" href="#getEndToEndInboundGroupSession">#</a>
        
        <span class="code-name">
            
                getEndToEndInboundGroupSession<span class="signature">(senderCurve25519Key, sessionId, txn, func)</span><span class="type-signature"></span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Retrieve the end-to-end inbound group session for a given
server key and session ID
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>senderCurve25519Key</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">The sender's curve 25519 key</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>sessionId</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">The ID of the session</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>txn</code></td>
  

  <td class="type">
  
      
<span class="param-type">*</span>


  
  </td>

  

  

  <td class="description last">An active transaction. See doTxn().</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>func</code></td>
  

  <td class="type">
  
      
<span class="param-type">function</span>


  
  </td>

  

  

  <td class="description last">Called with A map from sessionId
    to Base64 end-to-end session.</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line441">line 441</a>
            </span>
        </p>
    
</dl>





















</div>
            
                <div class="member">


    
    <h4 class="name" id="getEndToEndRooms">
        <a class="href-link" href="#getEndToEndRooms">#</a>
        
        <span class="code-name">
            
                getEndToEndRooms<span class="signature">(txn, func)</span><span class="type-signature"></span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Get an object of roomId->roomInfo for all e2e rooms in the store
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>txn</code></td>
  

  <td class="type">
  
      
<span class="param-type">*</span>


  
  </td>

  

  

  <td class="description last">An active transaction. See doTxn().</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>func</code></td>
  

  <td class="type">
  
      
<span class="param-type">function</span>


  
  </td>

  

  

  <td class="description last">Function called with the end to end encrypted rooms</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line540">line 540</a>
            </span>
        </p>
    
</dl>





















</div>
            
                <div class="member">


    
    <h4 class="name" id="getEndToEndSession">
        <a class="href-link" href="#getEndToEndSession">#</a>
        
        <span class="code-name">
            
                getEndToEndSession<span class="signature">(deviceKey, sessionId, txn, func)</span><span class="type-signature"></span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Retrieve a specific end-to-end session between the logged-in user
and another device.
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>deviceKey</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">The public key of the other device.</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>sessionId</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">The ID of the session to retrieve</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>txn</code></td>
  

  <td class="type">
  
      
<span class="param-type">*</span>


  
  </td>

  

  

  <td class="description last">An active transaction. See doTxn().</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>func</code></td>
  

  <td class="type">
  
      
<span class="param-type">function</span>


  
  </td>

  

  

  <td class="description last">Called with A map from sessionId
    to session information object with 'session' key being the
    Base64 end-to-end session and lastReceivedMessageTs being the
    timestamp in milliseconds at which the session last received
    a message.</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line375">line 375</a>
            </span>
        </p>
    
</dl>





















</div>
            
                <div class="member">


    
    <h4 class="name" id="getEndToEndSessions">
        <a class="href-link" href="#getEndToEndSessions">#</a>
        
        <span class="code-name">
            
                getEndToEndSessions<span class="signature">(deviceKey, txn, func)</span><span class="type-signature"></span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Retrieve the end-to-end sessions between the logged-in user and another
device.
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>deviceKey</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">The public key of the other device.</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>txn</code></td>
  

  <td class="type">
  
      
<span class="param-type">*</span>


  
  </td>

  

  

  <td class="description last">An active transaction. See doTxn().</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>func</code></td>
  

  <td class="type">
  
      
<span class="param-type">function</span>


  
  </td>

  

  

  <td class="description last">Called with A map from sessionId
    to session information object with 'session' key being the
    Base64 end-to-end session and lastReceivedMessageTs being the
    timestamp in milliseconds at which the session last received
    a message.</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line390">line 390</a>
            </span>
        </p>
    
</dl>





















</div>
            
                <div class="member">


    
    <h4 class="name" id="getOrAddOutgoingRoomKeyRequest">
        <a class="href-link" href="#getOrAddOutgoingRoomKeyRequest">#</a>
        
        <span class="code-name">
            
                getOrAddOutgoingRoomKeyRequest<span class="signature">(request)</span><span class="type-signature"> &rarr; {Promise}</span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Look for an existing outgoing room key request, and if none is found,
add a new one
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>request</code></td>
  

  <td class="type">
  
      
<span class="param-type"><a href="module-crypto_store_base.html#~OutgoingRoomKeyRequest">module:crypto/store/base~OutgoingRoomKeyRequest</a></span>


  
  </td>

  

  

  <td class="description last"></td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line196">line 196</a>
            </span>
        </p>
    
</dl>


















    <div class='columns method-parameter'>
        <div class="column is-2"><label>Returns:</label></div>
        <div class="column is-10">
            
                    

<div class="columns">
    
    <div class='param-desc column is-7'>resolves to
   <a href="module-crypto_store_base.html#~OutgoingRoomKeyRequest">module:crypto/store/base~OutgoingRoomKeyRequest</a>: either the
   same instance as passed in, or the existing one.</div>
    
    
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
        
<span class="param-type">Promise</span>


    </div>
    
</div>

                
        </div>
    </div>




</div>
            
                <div class="member">


    
    <h4 class="name" id="getOutgoingRoomKeyRequest">
        <a class="href-link" href="#getOutgoingRoomKeyRequest">#</a>
        
        <span class="code-name">
            
                getOutgoingRoomKeyRequest<span class="signature">(requestBody)</span><span class="type-signature"> &rarr; {Promise}</span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Look for an existing room key request
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>requestBody</code></td>
  

  <td class="type">
  
      
<span class="param-type"><a href="module-crypto.html#~RoomKeyRequestBody">module:crypto~RoomKeyRequestBody</a></span>


  
  </td>

  

  

  <td class="description last">existing request to look for</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line210">line 210</a>
            </span>
        </p>
    
</dl>


















    <div class='columns method-parameter'>
        <div class="column is-2"><label>Returns:</label></div>
        <div class="column is-10">
            
                    

<div class="columns">
    
    <div class='param-desc column is-7'>resolves to the matching
   <a href="module-crypto_store_base.html#~OutgoingRoomKeyRequest">module:crypto/store/base~OutgoingRoomKeyRequest</a>, or null if
   not found</div>
    
    
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
        
<span class="param-type">Promise</span>


    </div>
    
</div>

                
        </div>
    </div>




</div>
            
                <div class="member">


    
    <h4 class="name" id="getOutgoingRoomKeyRequestByState">
        <a class="href-link" href="#getOutgoingRoomKeyRequestByState">#</a>
        
        <span class="code-name">
            
                getOutgoingRoomKeyRequestByState<span class="signature">(wantedStates)</span><span class="type-signature"> &rarr; {Promise}</span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Look for room key requests by state
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>wantedStates</code></td>
  

  <td class="type">
  
      
<span class="param-type">Array.&lt;Number></span>


  
  </td>

  

  

  <td class="description last">list of acceptable states</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line224">line 224</a>
            </span>
        </p>
    
</dl>


















    <div class='columns method-parameter'>
        <div class="column is-2"><label>Returns:</label></div>
        <div class="column is-10">
            
                    

<div class="columns">
    
    <div class='param-desc column is-7'>resolves to the a
   <a href="module-crypto_store_base.html#~OutgoingRoomKeyRequest">module:crypto/store/base~OutgoingRoomKeyRequest</a>, or null if
   there are no pending requests in those states. If there are multiple
   requests in those states, an arbitrary one is chosen.</div>
    
    
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
        
<span class="param-type">Promise</span>


    </div>
    
</div>

                
        </div>
    </div>




</div>
            
                <div class="member">


    
    <h4 class="name" id="getOutgoingRoomKeyRequestsByTarget">
        <a class="href-link" href="#getOutgoingRoomKeyRequestsByTarget">#</a>
        
        <span class="code-name">
            
                getOutgoingRoomKeyRequestsByTarget<span class="signature">(userId, deviceId, wantedStates)</span><span class="type-signature"> &rarr; {Promise}</span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Look for room key requests by target device and state
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>userId</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">Target user ID</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>deviceId</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">Target device ID</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>wantedStates</code></td>
  

  <td class="type">
  
      
<span class="param-type">Array.&lt;Number></span>


  
  </td>

  

  

  <td class="description last">list of acceptable states</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line249">line 249</a>
            </span>
        </p>
    
</dl>


















    <div class='columns method-parameter'>
        <div class="column is-2"><label>Returns:</label></div>
        <div class="column is-10">
            
                    

<div class="columns">
    
    <div class='param-desc column is-7'>resolves to a list of all the
   <a href="module-crypto_store_base.html#~OutgoingRoomKeyRequest">module:crypto/store/base~OutgoingRoomKeyRequest</a></div>
    
    
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
        
<span class="param-type">Promise</span>


    </div>
    
</div>

                
        </div>
    </div>




</div>
            
                <div class="member">


    
    <h4 class="name" id="getSecretStorePrivateKey">
        <a class="href-link" href="#getSecretStorePrivateKey">#</a>
        
        <span class="code-name">
            
                getSecretStorePrivateKey<span class="signature">(txn, func, type)</span><span class="type-signature"></span>
            
        </span>
    </h4>
    

    
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>txn</code></td>
  

  <td class="type">
  
      
<span class="param-type">*</span>


  
  </td>

  

  

  <td class="description last">An active transaction. See doTxn().</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>func</code></td>
  

  <td class="type">
  
      
<span class="param-type">function</span>


  
  </td>

  

  

  <td class="description last">Called with the private key</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>type</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">A key type</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line327">line 327</a>
            </span>
        </p>
    
</dl>





















</div>
            
                <div class="member">


    
    <h4 class="name" id="getSessionsNeedingBackup">
        <a class="href-link" href="#getSessionsNeedingBackup">#</a>
        
        <span class="code-name">
            
                getSessionsNeedingBackup<span class="signature">(limit)</span><span class="type-signature"> &rarr; {Promise}</span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Get the inbound group sessions that need to be backed up.
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>limit</code></td>
  

  <td class="type">
  
      
<span class="param-type">integer</span>


  
  </td>

  

  

  <td class="description last">The maximum number of sessions to retrieve.  0
for no limit.</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line552">line 552</a>
            </span>
        </p>
    
</dl>


















    <div class='columns method-parameter'>
        <div class="column is-2"><label>Returns:</label></div>
        <div class="column is-10">
            
                    

<div class="columns">
    
    <div class='param-desc column is-7'>resolves to an array of inbound group sessions</div>
    
    
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
        
<span class="param-type">Promise</span>


    </div>
    
</div>

                
        </div>
    </div>




</div>
            
                <div class="member">


    
    <h4 class="name" id="markSessionsNeedingBackup">
        <a class="href-link" href="#markSessionsNeedingBackup">#</a>
        
        <span class="code-name">
            
                markSessionsNeedingBackup<span class="signature">(sessions, txn)</span><span class="type-signature"> &rarr; {Promise}</span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Mark sessions as needing to be backed up.
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>sessions</code></td>
  

  <td class="type">
  
      
<span class="param-type">Array.&lt;object></span>


  
  </td>

  

  

  <td class="description last">The sessions that need to be backed up.</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>txn</code></td>
  

  <td class="type">
  
      
<span class="param-type">*</span>


  
  </td>

  

  

  <td class="description last">An active transaction. See doTxn(). (optional)</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line581">line 581</a>
            </span>
        </p>
    
</dl>


















    <div class='columns method-parameter'>
        <div class="column is-2"><label>Returns:</label></div>
        <div class="column is-10">
            
                    

<div class="columns">
    
    <div class='param-desc column is-7'>resolves when the sessions are marked</div>
    
    
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
        
<span class="param-type">Promise</span>


    </div>
    
</div>

                
        </div>
    </div>




</div>
            
                <div class="member">


    
    <h4 class="name" id="startup">
        <a class="href-link" href="#startup">#</a>
        
        <span class="code-name">
            
                startup<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Ensure the database exists and is up-to-date, or fall back to
a local storage or in-memory store.

This must be called before the store can be used.
    </div>
    













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line65">line 65</a>
            </span>
        </p>
    
</dl>


















    <div class='columns method-parameter'>
        <div class="column is-2"><label>Returns:</label></div>
        <div class="column is-10">
            
                    

<div class="columns">
    
    <div class='param-desc column is-7'>resolves to either an IndexedDBCryptoStoreBackend.Backend,
or a MemoryCryptoStore</div>
    
    
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
        
<span class="param-type">Promise</span>


    </div>
    
</div>

                
        </div>
    </div>




</div>
            
                <div class="member">


    
    <h4 class="name" id="storeAccount">
        <a class="href-link" href="#storeAccount">#</a>
        
        <span class="code-name">
            
                storeAccount<span class="signature">(txn, newData)</span><span class="type-signature"></span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Write the account pickle to the store.
This requires an active transaction. See doTxn().
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>txn</code></td>
  

  <td class="type">
  
      
<span class="param-type">*</span>


  
  </td>

  

  

  <td class="description last">An active transaction. See doTxn().</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>newData</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">The new account pickle to store.</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line306">line 306</a>
            </span>
        </p>
    
</dl>





















</div>
            
                <div class="member">


    
    <h4 class="name" id="storeCrossSigningKeys">
        <a class="href-link" href="#storeCrossSigningKeys">#</a>
        
        <span class="code-name">
            
                storeCrossSigningKeys<span class="signature">(txn, keys)</span><span class="type-signature"></span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Write the cross-signing keys back to the store
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>txn</code></td>
  

  <td class="type">
  
      
<span class="param-type">*</span>


  
  </td>

  

  

  <td class="description last">An active transaction. See doTxn().</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>keys</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">keys object as getCrossSigningKeys()</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line337">line 337</a>
            </span>
        </p>
    
</dl>





















</div>
            
                <div class="member">


    
    <h4 class="name" id="storeEndToEndDeviceData">
        <a class="href-link" href="#storeEndToEndDeviceData">#</a>
        
        <span class="code-name">
            
                storeEndToEndDeviceData<span class="signature">(deviceData, txn)</span><span class="type-signature"></span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Store the state of all tracked devices
This contains devices for each user, a tracking state for each user
and a sync token matching the point in time the snapshot represents.
These all need to be written out in full each time such that the snapshot
is always consistent, so they are stored in one object.
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>deviceData</code></td>
  

  <td class="type">
  
      
<span class="param-type">Object</span>


  
  </td>

  

  

  <td class="description last"></td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>txn</code></td>
  

  <td class="type">
  
      
<span class="param-type">*</span>


  
  </td>

  

  

  <td class="description last">An active transaction. See doTxn().</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line508">line 508</a>
            </span>
        </p>
    
</dl>





















</div>
            
                <div class="member">


    
    <h4 class="name" id="storeEndToEndInboundGroupSession">
        <a class="href-link" href="#storeEndToEndInboundGroupSession">#</a>
        
        <span class="code-name">
            
                storeEndToEndInboundGroupSession<span class="signature">(senderCurve25519Key, sessionId, sessionData, txn)</span><span class="type-signature"></span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Writes an end-to-end inbound group session to the store.
If there already exists an inbound group session with the same
senderCurve25519Key and sessionID, it will be overwritten.
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>senderCurve25519Key</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">The sender's curve 25519 key</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>sessionId</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">The ID of the session</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>sessionData</code></td>
  

  <td class="type">
  
      
<span class="param-type">object</span>


  
  </td>

  

  

  <td class="description last">The session data structure</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>txn</code></td>
  

  <td class="type">
  
      
<span class="param-type">*</span>


  
  </td>

  

  

  <td class="description last">An active transaction. See doTxn().</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line482">line 482</a>
            </span>
        </p>
    
</dl>





















</div>
            
                <div class="member">


    
    <h4 class="name" id="storeEndToEndRoom">
        <a class="href-link" href="#storeEndToEndRoom">#</a>
        
        <span class="code-name">
            
                storeEndToEndRoom<span class="signature">(roomId, roomInfo, txn)</span><span class="type-signature"></span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Store the end-to-end state for a room.
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>roomId</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">The room's ID.</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>roomInfo</code></td>
  

  <td class="type">
  
      
<span class="param-type">object</span>


  
  </td>

  

  

  <td class="description last">The end-to-end info for the room.</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>txn</code></td>
  

  <td class="type">
  
      
<span class="param-type">*</span>


  
  </td>

  

  

  <td class="description last">An active transaction. See doTxn().</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line531">line 531</a>
            </span>
        </p>
    
</dl>





















</div>
            
                <div class="member">


    
    <h4 class="name" id="storeEndToEndSession">
        <a class="href-link" href="#storeEndToEndSession">#</a>
        
        <span class="code-name">
            
                storeEndToEndSession<span class="signature">(deviceKey, sessionId, sessionInfo, txn)</span><span class="type-signature"></span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Store a session between the logged-in user and another device
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>deviceKey</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">The public key of the other device.</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>sessionId</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">The ID for this end-to-end session.</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>sessionInfo</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">Session information object</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>txn</code></td>
  

  <td class="type">
  
      
<span class="param-type">*</span>


  
  </td>

  

  

  <td class="description last">An active transaction. See doTxn().</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line412">line 412</a>
            </span>
        </p>
    
</dl>





















</div>
            
                <div class="member">


    
    <h4 class="name" id="storeSecretStorePrivateKey">
        <a class="href-link" href="#storeSecretStorePrivateKey">#</a>
        
        <span class="code-name">
            
                storeSecretStorePrivateKey<span class="signature">(txn, type, key)</span><span class="type-signature"></span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Write the cross-signing private keys back to the store
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>txn</code></td>
  

  <td class="type">
  
      
<span class="param-type">*</span>


  
  </td>

  

  

  <td class="description last">An active transaction. See doTxn().</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>type</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">The type of cross-signing private key to store</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>key</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">keys object as getCrossSigningKeys()</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line348">line 348</a>
            </span>
        </p>
    
</dl>





















</div>
            
                <div class="member">


    
    <h4 class="name" id="unmarkSessionsNeedingBackup">
        <a class="href-link" href="#unmarkSessionsNeedingBackup">#</a>
        
        <span class="code-name">
            
                unmarkSessionsNeedingBackup<span class="signature">(sessions, txn)</span><span class="type-signature"> &rarr; {Promise}</span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Unmark sessions as needing to be backed up.
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>sessions</code></td>
  

  <td class="type">
  
      
<span class="param-type">Array.&lt;object></span>


  
  </td>

  

  

  <td class="description last">The sessions that need to be backed up.</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>txn</code></td>
  

  <td class="type">
  
      
<span class="param-type">*</span>


  
  </td>

  

  

  <td class="description last">An active transaction. See doTxn(). (optional)</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line571">line 571</a>
            </span>
        </p>
    
</dl>


















    <div class='columns method-parameter'>
        <div class="column is-2"><label>Returns:</label></div>
        <div class="column is-10">
            
                    

<div class="columns">
    
    <div class='param-desc column is-7'>resolves when the sessions are unmarked</div>
    
    
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
        
<span class="param-type">Promise</span>


    </div>
    
</div>

                
        </div>
    </div>




</div>
            
                <div class="member">


    
    <h4 class="name" id="updateOutgoingRoomKeyRequest">
        <a class="href-link" href="#updateOutgoingRoomKeyRequest">#</a>
        
        <span class="code-name">
            
                updateOutgoingRoomKeyRequest<span class="signature">(requestId, expectedState, updates)</span><span class="type-signature"> &rarr; {Promise}</span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        Look for an existing room key request by id and state, and update it if
found
    </div>
    









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        
<tr class="deep-level-0">
  
      <td class="name"><code>requestId</code></td>
  

  <td class="type">
  
      
<span class="param-type">string</span>


  
  </td>

  

  

  <td class="description last">ID of request to update</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>expectedState</code></td>
  

  <td class="type">
  
      
<span class="param-type">number</span>


  
  </td>

  

  

  <td class="description last">state we expect to find the request in</td>
</tr>


    

        
<tr class="deep-level-0">
  
      <td class="name"><code>updates</code></td>
  

  <td class="type">
  
      
<span class="param-type">Object</span>


  
  </td>

  

  

  <td class="description last">name/value map of updates to apply</td>
</tr>


    
    </tbody>
</table>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="crypto_store_indexeddb-crypto-store.js.html" class="button">View Source</a>
            <span>
                <a href="crypto_store_indexeddb-crypto-store.js.html">crypto/store/indexeddb-crypto-store.js</a>, <a href="crypto_store_indexeddb-crypto-store.js.html#line267">line 267</a>
            </span>
        </p>
    
</dl>


















    <div class='columns method-parameter'>
        <div class="column is-2"><label>Returns:</label></div>
        <div class="column is-10">
            
                    

<div class="columns">
    
    <div class='param-desc column is-7'>resolves to
   <a href="module-crypto_store_base.html#~OutgoingRoomKeyRequest">module:crypto/store/base~OutgoingRoomKeyRequest</a>
   updated request, or null if no matching row was found</div>
    
    
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
        
<span class="param-type">Promise</span>


    </div>
    
</div>

                
        </div>
    </div>




</div>
            
            </div>
        </div>
    

    

    
</article>

</section>




                </div>
            </div>
        </div>
    </div>


<footer class="footer">
    <div class="content has-text-centered">
        <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Fri Apr 17 2020 17:38:11 GMT+0100 (British Summer Time)</p>
        <p class="sidebar-created-by">
            <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by 
            <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
        </p>
    </div>
</footer>


<script src="scripts/app.min.js"></script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>